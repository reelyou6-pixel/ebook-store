<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8">
  <title>ุชูุงุตูู ุงููุชุงุจ</title>
  <link rel="stylesheet" href="style.css">
  
</head>
<body>

<header>
  <h1> ุชูุงุตูู ุงููุชุงุจ</h1>
  <div class="actions">
    <a href="index.html"> ุงูุฑุฆูุณูุฉ</a>
    <a href="library.html">ุงูููุถูุฉ</a>
  </div>
</header>

<main>
  <div class="details" id="bookDetails"></div>
</main>

<script>
  const container = document.getElementById('bookDetails');
  const book = JSON.parse(localStorage.getItem('currentBook'));

  if (book) {
    // ูู ุงููุชุงุจ ููุฌูุฏ
    container.innerHTML = `
      <img src="${book.img}" alt="${book.title}">
      <h2>${book.title}</h2>
      <p>${book.desc}</p>
      <div class="btns">
      <p><strong>ุงูุณุนุฑ:</strong> ${book.price.toFixed(2)} $</p>
        <button id="sampleBtn"class="primary">ุชุญููู ุนููุฉ ๐</button>
        <button id="buyBtn" class="primary">ุถุน ูู ุงูููุถูุฉ</button>
      </div>

    `;

    // ุชุญููู ุงูุนููุฉ
    document.getElementById('sampleBtn')?.addEventListener('click', () => {
      const blob = new Blob([book.sample], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = book.title + '_sample.txt';
      a.click();
      URL.revokeObjectURL(url);
    });

    // ุฅุถุงูุฉ ููููุชุจุฉ
    document.getElementById('buyBtn')?.addEventListener('click', () => {
      const lib = JSON.parse(localStorage.getItem('myLibrary') || '[]');
      if (!lib.find(x => x.id === book.id)) {
        lib.push(book);
        localStorage.setItem('myLibrary', JSON.stringify(lib));
        alert('โ ุชู ุฅุถุงูุฉ ุงููุชุงุจ ุฅูู ููุชุจุชู');
      } else {
        alert('๐ ูุฐุง ุงููุชุงุจ ููุฌูุฏ ุจุงููุนู ูู ููุชุจุชู');
      }
    });

  } else {
    // ูู ูุง ููู ูุชุงุจ
    container.innerHTML = '<p>โ ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุงุจ</p>';
  }
</script>
<footer>
   <p>ยฉ 2025 ููุชุจุฉ ุงููุฑุงุกุฉ | ุฌููุน ุงูุญููู ูุญููุธุฉ | <a href="terms.html">ุงูุดุฑูุท ูุงูุฃุฎูุงููุงุช</a></p>

  </footer>
</body>
</html>
